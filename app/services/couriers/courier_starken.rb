module Couriers
  class CourierStarken < Couriers::Courier
    def initialize(destiny, payable, reference, commune_id)
      super(destiny, payable, reference, commune_id)
    end

    def self.availables
      new(nil, nil, nil, nil).destinies_restriction
    end

    def valid_shipment
      if %w(domicilio).include?(destiny) && payable
        raise Error::ErrorNotDestinyPayable.new(reference.to_s) if destinies_restriction.include?(commune.name)
      end
      raise Error::ErrorDestiny.new(reference.to_s) unless %W[domicilio sucursal starken-turbus].include?(destiny&.downcase)
      raise Error::ErrorNotCourierDestinyAvailable.new(reference.to_s) unless commune.available_for('starken')

      true
    end

    # private

    def destinies_restriction
      ["BELEN","CAMARONES","CAQUENA","CODPA","COSAPILLA","CUYA","ESQUINA","GENERAL LAGOS","MOLINOS","PACHAMA","PoconChile","Putre","SOCOROMA","SORA","TIGNAMAR","VISVIRI","ANCUAQUE","CAMINA","CANCOSA","CARIQUIMA","COLCHANE","COLLACAGUA","HUARA","ISLUGA","La Hauyca","La Tirana","LIRIMA","MAMINA","MOCHA","PICA","SOTOCA","AIQUINA","BAQUEDANO","CALETA BUENA","CASPANA","COBIJA","HORNITOS","LA NEGRA","LASANA","PAPOSO","QUILLAGUA","SOCAIRE","TOCONAO","ALGARROBAL","ALTO DEL CARMEN","BAHIA INGLESA","CANTO DE AGUA","CARRIZAL BAJO","CONAY","FREIRINA","LA ARENA","PAIPOTE","TIERRA AMARILLA","ALGARROBITO","ALTOVALSOL","ANDACOLLO","CAIMANES","CANELA","CAREN","CERRILLOS DE TAMAYA","CHANARAL ALTO","CHANARAL DE CAREN","CHILLEPIN","COMBARBALA","CUNCUMEN","DOMEYKO","EL HINOJAL","EL MOLLE","EL PALQUI","EL PENON","EL TAMBO","EL TANGUE","GABRIELA MISTRAL","GUANAQUEROS","GUANGUALI","HACIENDA LOS ANDES","HORCON IV","HUAMALATA","HUENTELAUQUEN","HUINTIL","ILLAPEL","LA CHIMBA","LA HIGUERA","LA JARILLA","LA MARQUESA","LA PLACILLA (PUNITAQUI)","LAS BREAS","LAS CARDAS","LAS CARDAS SUR","LAS DUNAS","LAS RAMADAS DE TULAHUEN","LAS TACAS","LIMARI","LLANOS DE GUANTA","LOS HORNOS","LOS OLIVOS","MINCHA","MONTE GRANDE","MONTE PATRIA","MORRILLOS","PAIHUANO","PALQUIAL","PAN DE AZUCAR","PEDREGAL","PICHASCA","PICHIDANGUI","PISCO ELQUI","PUERTO ALDEA","PUERTO VELERO","PUNITAQUI","PUNTA COLORADA","QUEBRADA DE TALCA","QUELON","QUILIMARI","RECOLETA IV","RIO HURTADO","SALAMANCA","SAN JULIAN","SAN MARCOS","SOCOS","SOTAQUI","TAMBILLO","TIERRAS BLANCAS","TONGOY","TOTORALILLO","TULAHUEN","VICUNA","ALGARROBO","ALICAHUE","ARTIFICIO","CABILDO","CACHAGUA","CALLE LARGA","CARTAGENA","CASABLANCA","CATAPILCO","CATEMU","CURIMON","EL MELON","EL QUISCO","EL SAUCE","EL TABO","GUARDIA VIEJA","HIJUELAS","HORCON","ISLA JUAN FERNANDEZ","ISLA NEGRA","LA CRUZ","LAGUNA VERDE","LAGUNILLAS","LAS DICHAS","LAS VENTANAS","LEYDA","LLAILLAY","LOS MOLLES","MAITENCILLO","MANDINGA","MARBELLA","MATANZAS","MONTENEGRO","NOGALES","OLMUE","PANQUEHUE","PAPUDO","PETORCA","PICHICUY","PORTILLO","PUCHUNCAVI","PUNTA DE TRALCA","PUTAENDO","QUINTAY","QUINTERO","RENACA","RINCONADA","RINCONADA DE GUZMAN","RINCONADA DE SILVA","ROCAS DE SANTO DOMINGO","SALADILLO","SANTA MARIA","ZAPALLAR","AGUA BUENA","BUCALEMU","CAHUIL","CALETONES","CHEPICA","CHIMBARONGO","CIRUELOS","CODEGUA","COINCO","COLTAUCO","COYA","CUNACO","DONIHUE","EL CARMEN RENGO","EL MANZANO","GRANEROS","LA CEBADA","LA ESTRELLA","LA RUFINA","LARMAHUE","LAS CABRAS","LAS NIEVES","LITUECHE","LO MIRANDA","LOLOL","LOS LINGUES","MALLOA","MARCHIHUE","NANCAGUA","NAVIDAD","OLIVAR ALTO","OLIVAR BAJO","PALMILLA san fernando","PAREDONES","PELEQUEN","PERALILLO","PEUMO","PICHIDEGUA","PICHILEMU","PLACILLA (SAN FERNANDO)","POPETA","PUENTE NEGRO","PUERTECILLO","PUMANQUE","QUINTA DE TILCOCO","RAPEL","REQUINOA","ROSARIO","SAN FRANCISCO DE MOSTAZAL","SAN VICENTE DE TAGUATAGUA","SEWELL","TOPOCALMA","VILLA ALHUE","BATUCO (TALCA)","BOBADILLA","CAMARICO","CAUQUENES","CHANCO","COLBUN","CONSTITUCION","CULENAR","CUMPEO","CURANIPE","CUREPTO","DUAO","EMPEDRADO","GUALLECO","HUALANE","ILOCA","LICANTEN","LO VALDIVIA","LONGAVI","LONTUE","LOS NICHES","LLICO","MAULE","MOLINA","NIRIVILO","PANIMAVIDA","PELARCO","PELLUHUE","PENCAHUE","RAUCO","RAUQUEN","RETIRO","RIO CLARO","ROMERAL","SAGRADA FAMILIA","SAN CLEMENTE","SAN JAVIER","SAN PEDRO DE ALCANTARA","SAN RAFAEL","TENO","VICHUQUEN","VILLA ALEGRE","VILLA PRAT","YERBAS BUENAS","ALTO BIO BIO","ANTUCO","BUCHUPUREO","CACHAPOAL","CAMPANARIO","CARAMPANGUE","CAYUCUPIL","CHARRUA","CHIGUAYANTE","CHOLGUAN","COBQUECURA","COELEMU","COIHUE","COIHUECO","COLIUMO","CONTULMO","DICHATO","FLORIDA","HUALQUI","HUEPIL","ISLA SANTA MARIA","LARAQUETE","LAS TRANCAS","LIRQUEN","LOS HORCONES","MINAS DEL PRADO","MININCO","MONTE AGUILA","NAHUELTORO","NEGRETE","NINHUE","NIPAS","NIQUEN","PANGAL","PEMUCO","PINGUERAL","PINTO","POLCURA","PORTEZUELO","PUEBLO SECO","PUNTA DE PARRA","PUNTA LAVAPIE","QUILACO","QUILLECO","QUINCHAMALI","QUIRIQUINA","RAFAEL","RAMADILLAS","RANGUELMO","RANQUIL","RIHUE","RUCAPEQUEN","SAN FABIAN DE ALICO","SAN GREGORIO","SAN IGNACIO","SAN NICOLAS","SAN ROSENDO","SANTA CLARA","SANTA JUANA","TANILVORO","TREGUALEMU","TREHUACO","TRUPAN","TUBUL","TUCAPEL","VEGAS DE ITATA","VILLA MERCEDES","VILLUCO","ZEMITA","BARROS ARANA","CABURGA","CAJON","CAPITAN PASTENE","CHERQUENCO","CHOLCHOL","CHOROICO","COLICO","COLONIA MENDOZA","CUNCO","CURACALCO","CURARREHUE","HUALPIN","ICALMA","LABRANZA","LAS HORTENCIAS","LIQUINE","LOS BOLDOS","LOS LAURELES","LOS SAUCES","LUMACO","MALALCAHUELLO","MELIPEUCO","PADRE LAS CASAS","PORMA","PUERTO DOMINGUEZ","QUEPE","QUEULE","RADAL","RENAICO","RUCA RAQUI (SAAVEDRA)","SAN PATRICIO","TEODORO SCHMIDT","TIRUA","TOLTEN","TROVOLHUE","VILCUN","VILLA BOLDO","CALAFQUEN","CHAUQUEN","CHOSHUENCO","CORRAL","COZ COZ","CURINANCO","HUELLAHUE","LLIFEN","MAFIL","MEHUIN","NELTUME","NIEBLA","PARCELA EL CARMEN","PUNUCAPA","QUILCHE","RAYENCURA","RINIHUE","RININAHUE","ROBLE HUACHO","SECTOR LA PENA","ACHAO","AHUI","ALERCE","BAHIA MANSA","CALETA GONZALO","CARELMAPU","CAULIN","CHACAO","CHAICA","CHAITEN","CHEPU","CHONCHI","COCHAMO","CURACO DE VELEZ","DALCAHUE","DEGAN","ENSENADA","ENTRE LAGOS","FRUTILLAR","FUTALEUFU","GUAPILACUY","HORNOPIREN","HUALAIHUE","HUELDEN","HUILLINCO","LA ARENA PTO MONTT","LAJAS BLANCAS","LECHAGUA","LENCA","LINAO","LLANQUIHUE","LOS MUERMOS","MAICOLPUE","MANAO","MAULLIN","MECHAICO","MECHUQUE","METRI","NAL","NUEVA BRAUNAU","PALENA","PALOMAR","PARGUA","PAULDEO","PETROHUE","PICHI PELLUCO","PIEDRA AZUL","PUAUCHO","PUCATRIHUE","PUELO","PUENTE QUILO","PUERTO OCTAY","PUNTA CORONA","PUQUELDON","PUYEHUE","QUEILEN","QUEMCHI","QUETALMAHUE","QUILLAIPE","QUINCHAO","RIO NEGRO","SAN JUAN","SAN JUAN DE LA COSTA","SAN PABLO","TRUMAO","VILLA SANTA LUCIA","YUSTE","BAHIA MURTA","BALMACEDA","CALETA ANDRADE","CHILE CHICO","COCHRANE","GUADAL","GUAITECAS","LA JUNTA","LA TAPERA","LAGO VERDE","MELINKA","NIREHUAO","PUERTO AGUIRRE","PUERTO AYSEN","PUERTO BERTRAND","PUERTO CHACABUCO","PUERTO CISNES","PUERTO TRANQUILO","PUYUHUAPI","RIO IBANEZ","TORTEL","VALLE SIMPSON","VILLA AMENGUAL","VILLA CERRO CASTILLO","VILLA MANIHUALES","VILLA OHIGGINS","VILLA ORTEGA","ANTARTICA","CAMERON","CERRO SOMBRERO","LAGUNA BLANCA","MONTE AYMOND","PORVENIR","PRIMAVERA","PUERTO BORIES","PUERTO TORO","PUERTO WILLIAMS","PUNTA DELGADA","RIO VERDE","TIMAUKEL","TORRES DEL PAINE","ALHUE","ALTO EL CANELO","ALTO JAHUEL","BATUCO (RM)","BOLLENAR","CAJON DEL MAIPO","CALERA DE TANGO","CHAMPA","CHICUREO","CHOCALAN","CIUDAD DE LOS VALLES","CODIGUA","COLINA","CULIPRAN","CURACAVI","EL CANELO","EL COLORADO","EL INGENIO","EL MELOCOTON","EL MEMBRILLO","EL MONTE","FARELLONES","GUAYACAN","HOSPITAL","HUELQUEN","ISLA DE MAIPO","JUNCAL","LA OBRA","LA PARVA","LAGUNA ACULEO","LAMPA","LAS VERTIENTES","LINDEROS","LO CHACON","LO VALDES","LOMAS DE LO AGUIRRE","LONQUEN","LOS MAITENES","MAIPO","MALLOCO","MARIA PINTO","MELIPILLA","NOS","NOVICIADO","PADRE HURTADO","PAINE","PENAFLOR","PIRQUE","POLPAICO","POMAIRE","RUNGUE","SAN ALFONSO","SAN GABRIEL","SAN JOSE DE MAIPO","SAN MANUEL","SAN PEDRO DE MELIPILLA","SANTA ROSA DE CHENA","TALAGANTE","TILTIL","VALDIVIA DE PAINE","VALLE NEVADO"]
    end

  end
end

